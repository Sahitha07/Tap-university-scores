<!DOCTYPE html>
<html>
<head>
  <title>Examinee Data Input</title>
  <style>
    /* Your CSS styles here */
  </style>
</head>
<body>
  <h1>Examinee Data Input</h1>
  <textarea id="examineeData" rows="5" cols="40" placeholder="Enter examinee marks here"></textarea>
  <br>
  <button id="processData" onclick="processExamineeData()">Process Data</button>
  <p id="output"></p>
  <ul id="outputList"></ul>

  <!-- Add Subject functionality -->
  <div>
    <input type="text" id="subjectName" placeholder="Enter subject name">
    <input type="number" id="subjectScore" placeholder="Enter subject score">
    <button id="addSubjectBtn" onclick="addSubject()">Add Subject</button>
  </div>
  <br>
  <!-- Delete Subject functionality -->
  <div>
    <select id="subjectToDelete">
      <option disabled selected>Select subject to delete</option>
    </select>
    <button id="deleteSubjectBtn" onclick="deleteSubject()">Delete Subject</button>
  </div>

  <script>
    const subjects = ['english', 'math', 'science', 'japanese', 'geography'];

    function isValidMarks(marks) {
      return marks.every(mark => mark >= 0 && mark <= 100);
    }

    function isValidDivision(division) {
      return division === 's' || division === 'l';
    }

    function isValidExamineeData(examineeData) {
      return examineeData.every(data => {
        const [division, ...marks] = data.split(' ');
        return isValidDivision(division) && isValidMarks(marks.map(Number));
      });
    }

    function isPassed(totalScores, scienceScores, humanitiesScores, division) {
  const totalScore = totalScores.reduce((total, score) => total + score, 0);
  const scienceScore = scienceScores.reduce((total, score) => total + score, 0);
  const humanitiesScore = humanitiesScores.reduce((total, score) => total + score, 0);

  return totalScore >= 350 && ((division === 'l' && humanitiesScore >= 160) || (division === 's' && scienceScore >= 160));
}

    function processExamineeData() {
      const rawData = document.getElementById('examineeData').value.trim();
      const examineeData = rawData.split('\n');
      let passersCount = 0;

      if (!isValidExamineeData(examineeData)) {
        alert('Invalid examinee data format! Please make sure the data follows the correct format.');
        return;
      }

      for (const data of examineeData) {
        const [division, english, math, science, japanese, geography] = data.split(' ');
        const totalScores = [parseInt(english), parseInt(math), parseInt(science), parseInt(japanese), parseInt(geography)];
        const scienceScores = [parseInt(math), parseInt(science)];
        const humanitiesScores = [parseInt(japanese), parseInt(geography)];

        if (isPassed(totalScores, scienceScores, humanitiesScores, division)) {
          passersCount++;
        }
      }

      const outputElement = document.getElementById('output');
      outputElement.textContent = "Number of Passers: " + passersCount;
    }

    function addSubject() {
      const subjectName = document.getElementById('subjectName').value.trim().toLowerCase();
      const subjectScore = parseInt(document.getElementById('subjectScore').value);

      if (subjectName && !isNaN(subjectScore)) {
        subjects.push(subjectName);

        // Reset input fields
        document.getElementById('subjectName').value = '';
        document.getElementById('subjectScore').value = '';

        updateSubjectToDeleteOptions();
      }
    }

    function deleteSubject() {
      const subjectToDelete = document.getElementById('subjectToDelete').value;
      const indexToDelete = subjects.indexOf(subjectToDelete);

      if (indexToDelete !== -1) {
        subjects.splice(indexToDelete, 1);
        updateSubjectToDeleteOptions();
      }
    }

    function updateSubjectToDeleteOptions() {
      const subjectToDeleteElement = document.getElementById('subjectToDelete');
      subjectToDeleteElement.innerHTML = '<option disabled selected>Select subject to delete</option>';

      for (const subject of subjects) {
        const option = document.createElement('option');
        option.value = subject;
        option.textContent = subject;
        subjectToDeleteElement.appendChild(option);
      }
    }

    updateSubjectToDeleteOptions();
  </script>
</body>
</html>
